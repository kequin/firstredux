{"version":3,"sources":["components/style.module.scss","assets/applyMath.js","reducers.js","components/content/buttons/buttons/index.js","actions.js","components/content/buttons/index.js","components/content/Total/index.js","components/content/index.js","components/app.js","index.js","components/content/buttons/style.module.scss","components/content/Total/style.module.scss","components/content/style.module.scss"],"names":["module","exports","getMathHandler","str","math","local_math","a","b","Number","divByZero","operation","getMathFn","math_str","scopes_open","match","length","scopes_close","Error","throwUnmatchedScopes","result","parseLinearMath","autoCorrect","deepRemoveScopes","applyMath","index","indexOf","scope","open","i","console","log","replace","slice","_","oper","plus_minus","mul_div","defaultState","last","now","lastSymbol","isWritten","reducer","state","action","newString","lastString","type","lenght","payload","connect","count","Any_Type","props","test","children","onClick","Buttons","map","item","idx","className","style","total","Container","Content","App","bck","store","createStore","reactDom","render","document","getElementById"],"mappings":"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","file":"static/js/main.70b71956.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"bck\":\"style_bck__1EU_A\"};","export default function getMathHandler(str) {\n    const math = getMathFn();  \n    let divByZero = false;\n  \n    return applyMath(str);\n    \n    /***/\n  \n    function applyMath(math_str) {\n      divByZero = false;    \n      throwUnmatchedScopes(math_str);\n      \n      math_str = deepRemoveScopes(math_str);    \n      math_str = autoCorrect(math_str);\n  \n      let result = parseLinearMath(math_str);\n      return divByZero ? \"Караул, тут делят на ноль!\" : result;\n    }\n  \n  \n    function deepRemoveScopes(str) {    \n      str = autoCorrect(str);\n      \n      let index = str.indexOf(\"(\");\n      if( index === -1 ) return parseLinearMath(str);\n      \n      let scope = \"(\";\n      let open = 1;\n      \n      for( let i = index + 1; i <= 100000; i++ ) {\n        if( i === 100000 ) console.log(\"Кажется пошел бесконечный цикл\");\n        \n        scope += str[i];\n        \n        if( str[i] === \"(\" ) {\n          open++;\n        } else if( str[i] === \")\" ) {\n          open--;\n        }\n        \n        if( open === 0 ) {\n          // Привет, рекурсия!\n          // Показалось проще перезапускать функцию после каждой найденной скобки.\n          // При этом учитывая и вложенные скобки scope.slice(1, -1)\n          return deepRemoveScopes( str.replace(scope, deepRemoveScopes( scope.slice(1, -1) ) ) );\n        }\n      }\n    }\n    \n    function parseLinearMath(math_str) { /* уже точно нет скобок */\n      math_str = autoCorrect(math_str);\n      math_str = mul_div(math_str);\n      math_str = plus_minus(math_str);\n  \n      return math_str;\n  \n      /***/\n  \n      function mul_div(math_str) {\n        let length = (math_str.match(/\\/|\\*/g) || []).length;\n        if (!length) return math_str;\n  \n        for (let i = 0; i < length; i++) {\n          math_str = math_str.replace(\n            /(\\d+(?:\\.\\d+)?)(\\/|\\*)(-?\\d+(?:\\.\\d+)?)/,\n            function(_, a, oper, b) {\n              return math(a, oper, b);\n            }\n          );\n  \n          math_str = autoCorrect(math_str);\n          // Строка не из миллиона символов, поэтому после каждой операции\n          // На всякий случай исправляется всё, что может пойти не так.\n          // В основном, \"гасятся\" знаки вида ++, +-, --\n        }\n  \n        return math_str;\n      }\n  \n      function plus_minus(math_str) {\n        let length = (math_str.match(/\\+|-/g) || []).length;\n        if (!length) return math_str;\n  \n        for (let i = 0; i < length; i++) {\n          math_str = math_str.replace(\n            /((?:^-)?\\d+(?:\\.\\d+)?)(\\+|-)(\\d+(?:\\.\\d+)?)/,\n            function(_, a, oper, b) {\n              return math(a, oper, b);\n            }\n          );\n  \n          math_str = autoCorrect(math_str);\n        }\n  \n        return math_str;\n      }\n    }\n  \n    function autoCorrect(math_str) {\n      return (math_str               // Замены:\n        .replace(/\\s/g, \"\")          // Удалить все пробелы\n        .replace(/\\(\\)/g, \"\")        // Убрать пустые скобки\n        .replace(/--/g, \"+\")         // Два минуса подряд → Плюс\n        .replace(/(\\+\\+|\\*\\*|\\/\\/)/g, (_, oper) => oper[0])\n                 // Двойные плюсы, умножения и пр → на один\n        .replace(/\\+-|-\\+/g, \"-\")    // Плюс после минуса и наоборот → на минус\n        .replace(/\\)\\(/g, \")*(\")     // Две скобки подряд → вставить умножение\n        .replace(/(\\d)\\(/g, \"$1*(\")  // Число и сразу скобка → умножение\n        .replace(/\\)(\\d)/g, \")*$1\")  // Скобка и сразу число → умножение\n        .replace(/(\\/|\\*)\\+/g, \"$1\") // *+ или /+ → убрать плюс\n      );\n    }\n  \n    function throwUnmatchedScopes(math_str) {\n      let scopes_open = (math_str.match(/\\(/g) || []).length;\n      let scopes_close = (math_str.match(/\\)/g) || []).length;\n  \n      if (scopes_open !== scopes_close) {\n        throw new Error(\"Unmatched parenthesis at \" + math_str);\n      }\n    }\n  \n    function getMathFn() {\n      let local_math = {\n        \"+\": (a, b) => Number(a) + Number(b),\n        \"-\": (a, b) => a - b,\n        \"*\": (a, b) => a * b,\n        \"/\": (a, b) => {\n          if( b === \"0\" ) {\n            divByZero = true;\n          }\n          \n          return (a / b);\n        },\n      };\n  \n      return function math(a, operation, b) {\n        return local_math[operation](a, b);\n      }\n    }\n  }","import getMathHandler from './assets/applyMath.js'\nconst defaultState = {\n    last: '',\n    now: '',\n    lastSymbol: true,\n    isWritten: false\n}\n\nconst reducer = (state = defaultState, action) => {\n    let newString = state.now;\n    let lastString = state.last;\n    switch (action.type) {\n        case 'NEW_ACTION':\n            if (newString.lenght === 0 || state.lastSymbol) {\n                newString = state.now;\n            } else {\n                newString = state.now + ' ' + action.payload + ' ';\n            }\n            return {\n                last: state.last,\n                now: newString,\n                lastSymbol: true,\n                isWritten: false\n            };\n        case 'NEW_NUMBER':\n            if (state.isWritten) {\n                newString = action.payload;\n            } else {\n                newString = state.now + action.payload;\n            }\n            return {\n                last: state.last,\n                now: newString,\n                lastSymbol: false,\n                isWritten: false\n            }\n        case 'DELETE_ONE':\n            newString = state.now.slice(0, -1)\n            return {\n                last: state.last,\n                now: newString,\n                lastSymbol: false,\n                isWritten: false\n            }\n        case 'DELETE_ALL':\n            newString = '';\n            return {\n                last: state.last,\n                now: newString,\n                lastSymbol: true,\n                isWritten: false\n            }\n        case 'TOTAL':\n            lastString = newString;\n            newString = getMathHandler(newString);\n            return {\n                last: lastString,\n                now: newString + ' ',\n                lastSymbol: false,\n                isWritten: true\n            }\n        case 'SQRT':\n            newString = state.now + '√';\n            return {\n                last: lastString,\n                now: newString,\n                lastSymbol: false,\n                isWritten: false\n            }\n        default:\n            return state;\n    } \n}\n\nexport default reducer;","import React from 'react';\nimport { connect } from 'react-redux';\nimport { Any_Type } from '../../../../actions';\n\nconst Details = ({Any_Type, children}) => {\n\n    return(\n        <div onClick={() => Any_Type(children)}>\n            {children}\n        </div>\n    )\n}\nconst mapStateToProps = state => {return {count: state}}\n\nexport default connect(mapStateToProps, {Any_Type})(Details);","export const Any_Type = (props) => {\n    if (/^[0-9]+$/.test(props)) {\n        return { type: 'NEW_NUMBER', payload: props }\n    } else if(props === 'delete'){\n        return {type: 'DELETE_ONE'}\n    } else if(props === 'C'){\n        return {type: 'DELETE_ALL'}\n    } else if(props === '='){\n        return { type: 'TOTAL' }\n    } else if(props === '√'){\n        return  {type: 'SQRT'}\n    } else {\n        return { type: 'NEW_ACTION', payload: props }\n    }\n}  ","import React from 'react';\nimport style from './style.module.scss';\nimport Details from './buttons';\n\nconst Buttons = () => {\n    const object = ['.', '√', 'delete' ,'C', 1, 2, 3,'*', 4, 5, 6,'/', 7, 8, 9, '+', 0, '00', '=', '-' ];\n    const map = object.map((item, idx) => <li key={idx}><Details>{item}</Details></li>)\n    return (\n        <div className={style.Buttons}>\n            <ul>\n                {map} \n            </ul>\n        </div>\n    )\n}\n\nexport default Buttons;","import React from 'react';\nimport style from './style.module.scss';\nimport { connect } from 'react-redux';\n\nconst Total = ({total}) => {\n    console.log();\n    return (\n        <div className={style.Container}>\n            <h3>\n                {total.last}\n            </h3>\n            <h1>\n                {total.now}\n            </h1>\n        </div>\n    )\n}\n\nconst mapStateToProps = state => { return { total: state } }\n\nexport default connect(mapStateToProps)(Total);","import React from 'react';\nimport Buttons from './buttons';\nimport Total from './Total'; \nimport style from './style.module.scss'\n\nconst Content = () => {\n\n    return ( \n        <div className={style.Container}>\n            <Total />\n            <Buttons />\n        </div>\n    )\n}\n\nexport default Content;","import React from 'react';\nimport Content from './content/index.js'\nimport style from './style.module.scss';\n\nconst App = () => {\n\n    return (\n        <div className={style.bck}>\n            <Content />\n        </div>\n    )\n}\nexport default App;","import reactDom from 'react-dom';\nimport { createStore } from 'redux';\nimport { Provider } from 'react-redux';\nimport reducer from './reducers.js'\nimport App from './components/app.js';\n\nconst store = createStore(reducer);\n\nreactDom.render(\n  <Provider store={store}>\n    <App />\n  </Provider>\n, document.getElementById('root'));","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Buttons\":\"style_Buttons__3PbkO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Container\":\"style_Container__3R828\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Container\":\"style_Container__2A4oU\"};"],"sourceRoot":""}